# Documentation des règles utilisées par ArtiScales

## Principe

Afin de permettre la simulation locale de formes bâties avec [SimPLU3D](https://github.com/SimPLU3D/simplu3D), ArtiScales doit prendre en compte un certain nombre de règles issues des PLU, des SUP (servitudes d'utilité publique) et de contraintes supplémentaires sur la forme des bâtiments simulés. La proposition de modélisation sur les aspects réglementaires a été faite d'après le format CartoPLU+ de l'IAUIDF et d'ajouts nécessaires relativement aux documents d'urbanisme de la Communauté d'Agglomération du Grand Besançon.

Certaines règles portent sur les PLU (et sont modélisées dans le predicate.csv), les règles concernant les SUP se trouvent dans les fichiers (prescriptionXXX.shp) et les contraintes concernant les formes des bâtiments sont stockées avec les paramètres de scénarios (parametreScenario.xml).

## Règles et application des règles du PLU

Les règles sont stockées dans un format CSV, le tableau ci-dessous reprend :
- les différentes colonnes définies dans le format ;
- le lien vers la page définissant comment la contrainte s'applique sur une parcelle  ;
- l'état d'avancement de l'implémentation de ces contraintes ;
- des remarques éventuelles.

| Nom de l'attribut     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Page associée                                        | État                                                                                                                      | Notes                                                                                                         |
|:----------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------|
| **libelle_zone**      | Nom de la commune concernée                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                                      |                                                                                                                           | Renommer en commune ?                                                                                         |
| **insee**             | Indice INSEE de la commune                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                      |                                                                                                                           | Non utilisé dans le code ???                                                                                  |
| **libelle_de_base**   | Intitulé général de la zone  (U, UA, ...)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                      |                                                                                                                           | Non utilisé dans le code                                                                                      |
| **libelle_de_dul**    | Intitulé précis de la zone (UA1, UAb, ...)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                      |                                                                                                                           | Utilisé pour faire le lien entre le règlement en CSV et le champs libelle des zones urbaines                  |
| **fonction**         | Vocation de la zone (amener à évoluer)       0 : RAS <br > 1 : bonus densité <br > -1 : zone peu dense limité à deux logements par parcelle                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                      |                                                                                                                           | Non utilisé dans le code ? Sens des valeurs ?                                                                 |
| **OAP**               | 0 : Absence d’OAP <br > 1 :  OAP existante <br > 2 : OAP prévue mais non définie **=> *donc la parcelle est inconstructible**    <br > 10 : ZAC existante     <br > 20 : Document de protection du partrimoine (PSMV,ZPPAUP)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                      | ![#f03c15](https://placehold.it/15/f03c15/000000?text=+) <span style="color:red"> A faire </span>                         | Non utilisé                                                                                                                                                                                                   |
| **art_3**             | Servitude de passage <br />  **0** : L’article ne s’applique pas  <br />  **1** : La parcelle qui n’a pas accès à la voirie doit mettre à disposition une servitude de passage <br /> **99** : Non renseigné                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | [Rule-art-003](./rules/Rule-art-003.md)              | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span>                            |                                                                                                               |
| **art_4**             | Règle d'assainissement <br />  **0** : Non réglementé <br /> **1** : Doit être raccordé au réseau collectif  <br /> **2** : Assainissement individuel obligatoire dans les zones d’assainissement autonome. Si suivi d'une valeure séparée par un tirêt, peut imposer la réservation de surface sur la parcelle pour prévoir cet assainissement <br /> **99** : Non renseigné                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | [Rule-art-004](./rules/Rule-art-004.md)              | ![#f03c15](https://placehold.it/15/f03c15/000000?text=+) <span style="color:red"> A faire </span>                         |                                                                                                               |
| **art_5**    |   préconisations pour la parcelle acceuillant l'urbanisation   <br >**n** Aire minimale pour une parcelle constructible   <br >**_n** une surface de n m² doit être réservé pour un usage précis (i.e un système d'assainissement individuel) <br > **99** : Non renseigné         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | [Rule-art-005](./rules/Rule-art-005.md)              | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span>                            |   La notation "_n" porte à confusion avec le "n" => à modifier                                                                                                        |
| **art_6**             | Distance des constructions par rapport à la voirie en mètre (m)  <br />  **0** : Alignement obligatoire <br /> **44**: La distance comptée horizontalement de tout point du bâtiment au point le plus proche de l'alignement opposé doit être au moins égale à la différence d'altitude entre ces deux points (contrainte du RNU) <br />  **n** : Distance minimale de **n** mètres     <br />  **n1-n2** : Distance minimale de **n1** mètres et maximale de **n2** mètres                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | [Rule-art-006](./rules/Rule-art-006.md)              | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span>                            |                                                                                                               |
| **art_6_opt**         | Autre contrainte de recul <br />  **1**:  Distance en fonction du numéro d’une route. Distance contenue dans le champ **art6_optD** ( a voir si l’on peut retrouver ce numéro) <br /> **10**:  aligné à la limite ou avec un retrait de **art_6_optD** mètres <br /> **20** : Doit respecter les alignements de l’une des construction voisine. Si aucune, voir Art6_optD ou Art6 <br /> **30** : Doit respecter les alignements des deux constructions voisines. Si aucune, voir Art6_optD ou Art6                                                                                                                                                                                                                                                                                                                                                                       | [Rule-art-006-Art6-opt](./rules/Rule-art-006-opt.md) | ![#f03c15](https://placehold.it/15/f03c15/000000?text=+) <span style="color:red">A faire en bonus si on a le temps</span> | Réfléchir à comment bien encoder la recherche d'un objet route. Nom trop proche de art_6_optD                 |
| **art_6_optD**        | Information attributaire pouvant renseigner les valeurs des règles **art_6** et **art_6_opt** <br /> **n-xxx** : distance **n** à l’élement **xxx**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                      |                                                                                                                           | Nom trop proche de art_6opt, est-ce que ça ne pose pas de problème que ça soit utilisé pour 2 règles ?        |
| **art_71**            | Implantation en limite séparative latérale <br /> **0** : Non, retrait imposé (cf.72) <br /> **1** : Oui <br> **2** : Oui, mais sur un côté seulement <br /> **3** : Oui seulement si un bâtiment est déjà en limite de propriété                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | [Rule-art-0071](./rules/Rule-art-0071.md)            | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span>    </span>                 |                                                                                                               |
| **art_72**            | Distance minimale des constructions par rapport aux limites séparatives latérales imposée en mètre <br /> **88** : non renseignable <br /> **99** : non réglementé                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | [Rule-art-0071](./rules/Rule-art-0071.md)            | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span>                            |                                                                                                               |
| **art_73**            | Distance minimale des constructions par rapport à la limite séparative de fond de parcelle<br /> **88** : Non renseignable <br /> **99** : Non réglementé                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | [Rule-art-0073](./rules/Rule-art-0073.md)            | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span>                            |                                                                                                               |
| **art_74**            | Distance minimum des constructions par rapport aux limites séparatives, exprimée par rapport à la hauteur du bâtiment <br />  **0** : Pas de prospect <br />  **1** : Retrait égal à la hauteur <br /> **2** : Retrait égal à la hauteur divisé par deux <br /> **3** : Retrait égal à la hauteur divisé par trois <br /> **4** : Retrait égal à la hauteur divisé par quatre <br /> **5** : Retrait égal à la hauteur divisé par cinq <br /> **6** : Retrait égal à la hauteur divisé par deux moins  trois mètres <br >**7** : Retrait égal à la hauteur moins trois mètres divisé  par deux <br /> **8** : retrait égal à la hauteur divisé par deux moins un mètre <br > **9** : retrait égal aux deux tiers de la hauteur <br /> **10** : retrait égal aux trois quarts de la hauteur | [Rule-art-0074](./rules/Rule-art-0074.md)            | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span>                            | Quels cas sont réellement nécessaires ?                                                                       |
| **art_8**             | Distance minimale des constructions les unes par rapport aux autres sur une même parcelle en mètres (m) <br > **88** : Non renseignable <br > **99** :  Non réglementé                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | [Rule-art-008](./rules/Rule-art-008.md)              | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span>                            | Comment traiter le cas 99 ?                                                                                   |
| **art_9**             | Coefficient d’emprise au sol maximum <br >Ratio de 0 à 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | [Rule-art-009](./rules/Rule-art-009.md)              | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span>                            |                                                                                                               |
| **art_10_top**        | Indicateur de l'unité de mesure de la hauteur du bâtiment <br > **1** : En niveaux  <br > **2**: En mètres du sol au point le plus haut du bâtiment ; <br>  **3**: Hauteur plafond <br> **4** : Point le plus haut <br > **5** : Hauteur de façade à l'égout, <br > **6** : Ne doit pas dépasser les bâtiments des parcelles adjacentes, sinon hauteur à l'égout <br> **7** : Ne doit pas dépasser les bâtiments des parcelles adjacentes, sinon hauteur entre les points <br > **8** : Doit être de la hauteur des bâtiments des parcelles adjacentes, sinon nombre d'étage <br > **-** : Spécial si sur limites séparatives. Par exemple, la valeur **12-v6-a4,5** signifie que la hauteur max est de 12 mètres mais qu'elle ne deva pas dépasser 6m du point le plus bas au point le plus haut en limite de voirie, et 4,5m en limite séparative      | [Rule-art-0010](./rules/Rule-art-0010.md)            | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait (sauf cas **"-"**) </span>                            |                                                                                                               |
| **art_101**           | Valeur avec laquelle la règle **art_10_top** est calculée                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cf [Rule-art-0010](./rules/Rule-art-0010.md)         |                                                                                                                           |                                                                                                               |
| **art_12**            | Règle de stationnement <br > **1** : un stationnement par logement <br > **1+2** :  2 places de stationnement par logement (dont 1 hors clôture pour les maisons individuelles) ; 1 place par logement (pour les immeubles collectifs). <br > **2** : deux stationnements par logement <br > **1m60_2** : un stationnement pour un logement en dessous de 60m2, 2 pour les logements plus <br /> **1l2_2** : un stationnement par logement dans les bâtiments contenant un logement, 2 stationnements par logements pour les bâtiment contenant deux logements ou plus <br /> **1x50** : un stationnement par 50 m² de logement <br /> **99** : Non renseigné                                                                                                                                                                                                                                                                                                                                                                 | [Rule-art-012](./rules/Rule-art-0012.md)              | ![#005500](https://placehold.it/15/ffa500/000000?text=+) <span style="color:orange">Fait (en cours de vérif)</span>                  | |                                                                                                             |
| **art_13**            | Part minimale d'espace libre de toute construction exprimée par rapport à la surface totale de la parcelle Ratio de 0 à 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | [Rule-art-0013](./rules/Rule-art-0013.md)            | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span>                            |                                                                                                               |
| **art_14**            | Coeffcient d'Occupation des Sols +XXs bonification pour les logements sociaux                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                      | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span>                            | Supprimé par la loi ALUR non pris en compte                                                                 | |

## Contraintes issues des SUP
| Nom de la règle                                               | Fiche explicative                       | État                                                                                                                 | Stockage du paramètre                                                               | Commentaires                                                    |
|:--------------------------------------------------------------|:----------------------------------------|:---------------------------------------------------------------------------------------------------------------------|:------------------------------------------------------------------------------------|:----------------------------------------------------------------|
| Alignement aux SUP                                            | [Rule-sup-001](./rules/Rule-sup-001.md) | ![#f03c15](https://placehold.it/15/f03c15/000000?text=+) <span style="color:red"> A faire </span>                    | Information stockée dans les prescriptions linéaires                                |                                                                 |
| Interdiction de construire dans une zone protégée par les SUP | [Rule-sup-002](./rules/Rule-sup-002.md) | ![#ffa500](https://placehold.it/15/ffa500/000000?text=+)<span style="color:orange"> Vérifier les cas couverts</span> | L'information est stockée dans les prescriptions surfaciques (prescXXXRegroupe.shp) | |La classe ForbiddenZoneGenerator génère la zone d'interdiction |




## Autres contraintes portant la configuration simulée
| Nom de la règle                                                   | Fiche explicative                         | État                                                                                           | Stockage du paramètre                                       | Commentaires                                                                                                                         |
|:------------------------------------------------------------------|:------------------------------------------|:-----------------------------------------------------------------------------------------------|:------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------|
| Limitation du nombre de boîtes                                    | [Rule-form-001](./rules/Rule-form-001.md) | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span> | parametreScenario.xml (nbCuboid)                            |                                                                                                                                      |
| Obligation des boîtes d'être à l'intérieur d'une parcelle         | [Rule-form-002](./rules/Rule-form-002.md) | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span> |                                                             |                                                                                                                                      |
| Intersection entre boîtes                                         | [Rule-form-003](./rules/Rule-form-003.md) | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span> | parametreScenario.xml        (intersection)                 | Si l'intersection n'est pas autorisée la distance entre boîtes est fixée par **art_8**                                               |
| Largeur maximale et distance de vis-à-vis pour un bâtiment simulé | [Rule-form-004](./rules/Rule-form-004.md) | ![#005500](https://placehold.it/15/005500/000000?text=+)<span style="color:green"> Fait</span> | Paramètre en dur (largeur max  = 15 m)  et (vis à vis 10 m) | Cette contrainte ne s'applique que si les intersections entre boîtes sont autorisées (sinon on peut fixer les paramètres des boîtes) |
